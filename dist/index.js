// Generated by CoffeeScript 1.9.2
var MediaQuery, React, ResizeMonitor;

React = require('react/addons');

ResizeMonitor = require('./resize');

MediaQuery = {
  propTypes: {
    breakpoints: React.PropTypes.array.isRequired
  },
  getInitialState: function() {
    return {
      breakpoint: ''
    };
  },
  getDefaultProps: function() {
    return {
      breakpoints: []
    };
  },
  hasCurrentBreakpoint: function() {
    return this.props.breakpoints.indexOf(this.state.breakpoint) !== -1;
  },
  componentDidMount: function() {
    return ResizeMonitor.addChangeListener(this._onChange);
  },
  componentWillUnmount: function() {
    return ResizeMonitor.removeChangeListener(this._onChange);
  },
  _getBreakpointFromBody: function() {
    if (!(window.getComputedStyle == null)) {
      return '';
    }
    return window.getComputedStyle(document.body, ':after').getPropertyValue('content').replace('-', '') || '';
  },
  _onChange: function() {
    return this.setState({
      breakpoint: this._getBreakpointFromBody()
    });
  },
  render: function() {
    console.log(this.state.breakpoint);
    if (!this.hasCurrentBreakpoint()) {
      return null;
    }
  }
};

module.exports = React.createClass(MediaQuery);
